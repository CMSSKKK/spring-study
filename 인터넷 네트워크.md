# 인터넷 네트워크

> 김영한 - 모든 개발자를 위한 HTTP 웹 기본 지식

## 1. 인터넷 통신

* 인터넷에서 컴퓨터 둘은 어떻게 통신할까?
* 인터넷 망을 통해서 중간노드들을 거쳐서 통신을 하는데 어떤 규칙을 통해서 통신이 가능한걸까?

## 2. IP(인터넷 프로토콜) 

### 역할

* 지정한 IP 주소에 데이터 전달
* 패킷이라는 통신 단위로 데이터 전달

### 전달 방식

1. 출발지 IP, 목적지 IP를 주소 적듯이 IP패킷을 생성
2. 생성한 클라이언트 패킷을 전달
3. 데이터를 받은 후 서버 패킷을 전달

### IP 프로토콜의 한계

* 비연결성
  * 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송
* 비신뢰성
  * 중간에 패킷이 사라지면? // 패킷소실
  * 패킷이 순서대로 안오면? // 패킷 전달 순서 문제 발생
    * 일반적으로 1500바이트가 넘어가면 패킷을 나눠서 전달한다.
* 프로그램 구분
  * 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?

## 3. 인터넷 프로토콜 스택의 4계층

* 애플리케이션 계층 - HTTP, FTP
* 전송 계층 - TCP, UDP
* 인터넷 계층 - IP
* 네트워크 인터페이스 계층

### 순서

1. 프로그램이 메시지 생성
2. SOCKET 라이브러리를 통해 전달
3. TCP 정보 생성, 메시지 데이터 포함
4. IP 패킷 생성, TCP 데이터 포함
5. LAN 카드 -> 인터넷

## 4. TCP(Transmission Control Protocol)

### TCP/IP 패킷 정보

* IP 패킷 - 출발지 IP, 목적지 IP, 기타 ...
* TCP 세그먼트 -출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보 ...
* 전송 데이터

### TCP 특징

* 연결지향 - TCP 3 way handshake(가상 연결)

* 데이터 전달 보증

* 순서 보장

* 신뢰할 수 있는 프로토콜

* 현재는 대부분 TCP 사용

  

#### TCP 3 way handshake

1. 클라이언트 - SYN : 접속 요청

2. 서버 - SYN+ACK : 요청 수락

3. 클라이언트 - ACK : 데이터도 함께 전송

   > 논리적으로 연결된 것

#### 순서 보장

1. 클라이언트 - 패킷1, 패킷2, 패킷3 순서로 전송
2. 서버 - 패킷1, 패킷3, 패킷2 순서로 도착
3. 서버 - 패킷2부터 다시 데이터를 보내도록 요청

## 5. UDP(User Datagram Protocol)

* 기능이 거의 없음
* 연결지향
* 데이터 전달 및 순서가 보장되지 않지만, **단순하고 빠름**
* IP와 거의 같다 
* PORT와 체크섬 정도만 추가된 것
* 애플리케이션에서 추가 작업이 필요
* 최근에는 HTTP3의 경우에 UDP 사용에 관심을 갖는 추세이다.

## 6. PORT

* IP는 목적지 서버를 찾는 것 PORT는 서버안에서 돌아가는 애플리케이션을 찾는 것으로 생각하면 된다.
* 같은 IP 내에서 프로세스 구분
  * 0~ 65535 할당 가능
  * 0 ~ 1023 : 잘 알려진 포트, 사용하지 않는 것이 좋음
    * FTP - 20, 21
    * TELNET - 23
    * HTTP - 80
    * HTTPS - 443

## 7. DNS(Domain Name System)

> IP는 기억하기 어렵고 변경될 수 있다.
>
> -> DNS로 해결

* 도메인 명을 IP 주소로 변환 (전화번호부와 같은 기능)

### 사용

1. 클라이언트가 도메인 명으로 DNS 서버에 요청
2. DNS 서버에서 IP 주소로 응답
3. 해당 IP로 접속

